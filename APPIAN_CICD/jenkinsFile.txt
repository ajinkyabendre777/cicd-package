pipeline {
agent any
    stages {
        stage('Checkout') {
            steps {
			
				checkout([$class: 'GitSCM', branches: [[name: '*/main']], doGenerateSubmoduleConfigurations: false, extensions: [[$class:'RelativeTargetDirectory',relativeTargetDir:'cicd']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: '6fccab87-6aec-4fab-a189-ed26a3466f47', url: 'https://github.com/ajinkyabendre777/coforge-cicd-package.git']]]) 
				
                checkout([$class: 'GitSCM', branches: [[name: '*/main']], doGenerateSubmoduleConfigurations: false, extensions: [[$class:'RelativeTargetDirectory',relativeTargetDir:'test']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: '6fccab87-6aec-4fab-a189-ed26a3466f47', url: 'https://github.com/ajinkyabendre777/coforge-eos-acceptance-test.git']]]) 
				

            }
        }
		
		 stage(DeployToTest) {
			steps {
			  powershell "cicd\\APPIAN_CICD\\01_deploy.ps1 EOS EOS-1 DEV"
			}
		
		}
		
		
		stage(Test) {
			steps {
			withMaven(maven: 'MAVEN_HOME') { 
			  bat "cd test"
			  bat "dir"
			  bat "mvn -f test/pom.xml clean install"
			  cucumber buildStatus: 'null', failedFeaturesNumber: -1, failedScenariosNumber: -1, failedStepsNumber: -1, fileIncludePattern: '**/cucumber.json', pendingStepsNumber: -1, skippedStepsNumber: -1, sortingMethod: 'ALPHABETICAL', undefinedStepsNumber: -1
			 }
			}
		
		}
		
	
	
    }
}





